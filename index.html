<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    #PumpkingImage, #Pumpkin {
        position: absolute; 
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }

</style>
<body>
    <img id="PumpkingImage" src="pumpkin.png" width="300px" height="auto">
    <canvas id="Pumpkin" style="z-index: 2;"></canvas>
</body>
<script>
    const canvas = document.getElementById('Pumpkin');
    const content = canvas.getContext("2d");
    const dpr = window.devicePixelRatio || 1;

    canvas.width = 300 * dpr;
    canvas.height = 256.633 *  dpr;
    canvas.style.width = '300px';
    canvas.style.height = '256.633px';

    content.scale(dpr, dpr);

    content.imageSmoothingEnabled = true;
    content.imageSmoothingQuality = 'high';

    x = 'eyes/eye_what.png';
    const leftEye = new Image();
    leftEye.crossOrigin = 'anonymous';
    leftEye.src = x;
    leftEye.onload = () => {
        content.drawImage(leftEye, 50, canvas.height / 3 / dpr, 81, 101);
        setTimeout(() => {
            const rightEye = new Image();
            rightEye.crossOrigin = 'anonymous';
            rightEye.src = x;
            rightEye.onload = () => {
                content.save();
                content.translate(300, 0);
                content.scale(-1, 1);
                content.drawImage(rightEye, 50, canvas.height / 3 / dpr, 81, 101);
                content.restore();
            }
        }, 10);
    }

    /*
    let render = {
        0: 'pumpkin.png',
        1: 'eyes/eye_what.png',
        2: 'eyes/eye_what.png'
    }

    function loadImage(src) {
        return new Promise((resolve) => {
            const img = new Image();
            img.crossOrigin = 'anonymous';
            img.onload = () => resolve(img);
            img.src = src;
        });
    }

    Promise.all([
        loadImage(render[0]),
        loadImage(render[1]),
        loadImage(render[2])
    ]).then(([pumpkin, leftEye, rightEye]) => {
        content.drawImage(leftEye, 50, canvas.height / 3 / dpr, 81, 101);

        content.save();
        content.translate(300, 0);
        content.scale(-1, 1);
        content.drawImage(rightEye, 50, canvas.height / 3 / dpr, 81, 101);
        content.restore();
    });
    for (let i = 0; i <= 2; i++) {
        const img = new Image();
        img.crossOrigin = 'anonymous';
        img.src = `${render[i]}.png`;
        img.onload = () => {
            if (i == 1) {
                content.drawImage(img, (100 * (i - 1)) + 100, canvas.height / 3 / dpr, 81, 101);
            } else if (i == 2) {
                content.save();
                content.translate(300, 0);
                content.scale(-1, 1);
                content.drawImage(img, (100 * (i - 1)) + 100, canvas.height / 3 / dpr, 81, 101);
                content.restore();
            } else {
                content.drawImage(img, 0, 0, 300, 256.633);
            }
        }
    }
    */
</script>
</html>